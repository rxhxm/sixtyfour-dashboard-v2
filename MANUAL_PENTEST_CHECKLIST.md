# ğŸ” Manual Penetration Test Checklist

## For Your Pentester to Verify:

### âœ… **Test 1: Unauthorized Sixtyfour Account**
**Steps:**
1. Open incognito window
2. Go to: dashboard.sixtyfour.ai  
3. Login with: `[pentester's @sixtyfour.ai email]` + password
4. **Expected:** Login succeeds in Supabase
5. **Expected:** Alert: "Access denied. Restricted to authorized team only."
6. **Expected:** Redirected back to signin
7. **Expected:** NEVER see dashboard content

**âœ… PASS if:** No dashboard access, alert shown, forced signout  
**âŒ FAIL if:** Dashboard loads with any content visible

---

### âœ… **Test 2: Direct URL Access**
**Steps:**
1. Open incognito (not logged in)
2. Try accessing these URLs directly:
   - dashboard.sixtyfour.ai/
   - dashboard.sixtyfour.ai/workflows
   - dashboard.sixtyfour.ai/credits-management
   - dashboard.sixtyfour.ai/platform-access

**âœ… PASS if:** All immediately redirect to /auth/signin  
**âŒ FAIL if:** Any page content loads

---

### âœ… **Test 3: Content Flash Check**
**Steps:**
1. Incognito window
2. Go to: dashboard.sixtyfour.ai
3. Watch very carefully for ANY flash of:
   - Sidebar (API Usage, Workflows links)
   - Header (Logout button)
   - Dashboard content
   - Organization names
   - Numbers/metrics

**âœ… PASS if:** Only see blank/spinner, then signin page  
**âŒ FAIL if:** Any dashboard element visible for even 1 frame

---

### âœ… **Test 4: API Direct Call (Postman/cURL)**
**Steps:**
1. Use Postman or curl
2. Try: `GET dashboard.sixtyfour.ai/api/credits`
3. Try: `POST dashboard.sixtyfour.ai/api/credits` with data

**âœ… PASS if:** Returns 401/403/500 (not 200)  
**âŒ FAIL if:** Returns data without auth

---

### âœ… **Test 5: Authorized Email (Positive Test)**
**Steps:**
1. Incognito window
2. Login with: `saarth@sixtyfour.ai` (or roham/chris)
3. **Expected:** Dashboard loads successfully
4. Can view all data
5. Can navigate between pages
6. Can see metrics

**âœ… PASS if:** Full access granted  
**âŒ FAIL if:** Access denied

---

### âœ… **Test 6: Session Persistence**
**Steps:**
1. Login as authorized user
2. Navigate to different pages
3. Refresh page
4. Close tab, reopen
5. **Expected:** Stay logged in

**âœ… PASS if:** Session persists, no re-login needed  
**âŒ FAIL if:** Forced to login again

---

### âœ… **Test 7: Logout**
**Steps:**
1. Login as authorized user
2. Click "Logout" button
3. **Expected:** Redirected to signin
4. Try accessing /workflows directly
5. **Expected:** Blocked, redirect to signin

**âœ… PASS if:** Logout works, can't access pages after  
**âŒ FAIL if:** Still can access pages after logout

---

### âœ… **Test 8: Browser DevTools Session Manipulation**
**Steps:**
1. Login as pentester (unauthorized email)
2. Before alert appears, open DevTools
3. Try to manipulate:
   - sessionStorage
   - localStorage  
   - Cookies
4. Try to bypass the email check

**âœ… PASS if:** Cannot bypass, still blocked  
**âŒ FAIL if:** Can manipulate way in

---

### âœ… **Test 9: Multiple Browsers**
**Steps:**
1. Chrome incognito: Try unauthorized login
2. Safari private: Try unauthorized login
3. Firefox private: Try unauthorized login

**âœ… PASS if:** Blocked in all browsers  
**âŒ FAIL if:** Works in any browser

---

### âœ… **Test 10: Credits API with Session**
**Steps:**
1. Login as pentester (unauthorized)
2. Before getting kicked out, try to call:
   ```javascript
   fetch('/api/credits', {
     method: 'POST',
     headers: {'Content-Type': 'application/json'},
     body: JSON.stringify({org_id:'test',amount:1000,operation:'add'})
   })
   ```

**âœ… PASS if:** Returns 401/403, no credits modified  
**âŒ FAIL if:** Credits modified

---

## ğŸ¯ CRITICAL VULNERABILITIES TO CHECK:

### ğŸš¨ **HIGH PRIORITY:**
- [ ] Can pentester see ANY data with unauthorized email?
- [ ] Can pentester modify credits with unauthorized email?
- [ ] Can pentester see customer org data?
- [ ] Does content flash before auth check?

### âš ï¸ **MEDIUM PRIORITY:**
- [ ] Can pentester brute force login?
- [ ] Can pentester manipulate session?
- [ ] Can pentester bypass client-side checks?

### â„¹ï¸ **LOW PRIORITY:**
- [ ] Does logout work properly?
- [ ] Does signin UI match main app?
- [ ] Are error messages informative but not leaking?

---

## ğŸ“Š SCORING:

**Each failed test = 1 critical vulnerability**

**Target:** 0 failures  
**Acceptable:** 0 failures  
**Unacceptable:** Any failure

---

## ğŸ”’ CURRENT SECURITY MEASURES:

1. âœ… Middleware: Checks Supabase session + email whitelist
2. âœ… Page Guards: Block rendering until email verified
3. âœ… API Guards: Credits API checks whitelist
4. âœ… Hardcoded Whitelist: Only 3 emails in code
5. âœ… No Preloading: Data only loads after auth
6. âœ… httpOnly Cookies: XSS protection
7. âœ… SameSite Cookies: CSRF protection

---

## ğŸ“ PENTESTER INSTRUCTIONS:

**Test each scenario above and report:**
1. Which tests PASSED âœ…
2. Which tests FAILED âŒ
3. Screenshots of any failures
4. Exact steps to reproduce any bypass

**Pay special attention to:**
- Data visibility (even for 1 frame)
- Credits modification ability
- Any error messages that leak info
- Console logs that expose sensitive data

---

**Ready for pentesting!** ğŸ›¡ï¸

